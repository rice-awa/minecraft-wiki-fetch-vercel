# Serverless è¿ç§»è¯´æ˜

## ğŸ“‹ æ”¹åŠ¨æ¦‚è¿°

æœ¬é¡¹ç›®å·²æˆåŠŸé€‚é… Vercel Serverless ç¯å¢ƒï¼Œä»¥ä¸‹æ˜¯ä¸»è¦æ”¹åŠ¨ï¼š

## ğŸ†• æ–°å¢æ–‡ä»¶

### æ ¸å¿ƒæ–‡ä»¶
- `api/index.js` - Vercel serverless å‡½æ•°å…¥å£ç‚¹
- `vercel.json` - Vercel å¹³å°é…ç½®æ–‡ä»¶

### é…ç½®æ–‡ä»¶
- `.env.vercel` - Serverless ç¯å¢ƒå˜é‡é…ç½®
- `deploy-vercel.md` - è¯¦ç»†éƒ¨ç½²æŒ‡å—
- `README-SERVERLESS.md` - Serverless ç‰ˆæœ¬ä½¿ç”¨æ–‡æ¡£
- `QUICK-DEPLOY.md` - å¿«é€Ÿéƒ¨ç½²æŒ‡å—

### è„šæœ¬æ–‡ä»¶
- `scripts/deploy-vercel.js` - è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
- `scripts/test-serverless.js` - Serverless åŠŸèƒ½æµ‹è¯•è„šæœ¬
- `scripts/dev-serverless.js` - æœ¬åœ° Serverless å¼€å‘æœåŠ¡å™¨

## ğŸ”§ ä¿®æ”¹æ–‡ä»¶

### package.json
æ–°å¢è„šæœ¬å‘½ä»¤ï¼š
```json
{
  "vercel-dev": "vercel dev",
  "deploy": "vercel --prod",
  "deploy:preview": "vercel",
  "test:serverless": "node scripts/test-serverless.js",
  "deploy:script": "node scripts/deploy-vercel.js",
  "dev:serverless": "node scripts/dev-serverless.js"
}
```

### src/utils/logger.js
- æ·»åŠ  serverless ç¯å¢ƒæ£€æµ‹
- åœ¨ serverless ç¯å¢ƒä¸‹ç¦ç”¨æ–‡ä»¶æ—¥å¿—
- ä¼˜åŒ–å†…å­˜ä½¿ç”¨

## ğŸ—‘ï¸ åˆ é™¤æ–‡ä»¶
- `api/vercel_index.js` - æ—§çš„å…¥å£æ–‡ä»¶ï¼ˆå·²æ›¿æ¢ï¼‰

## ğŸ—ï¸ æ¶æ„å˜åŒ–

### ä¼ ç»Ÿéƒ¨ç½² vs Serverless

| ç‰¹æ€§ | ä¼ ç»Ÿéƒ¨ç½² | Serverless |
|------|----------|------------|
| æœåŠ¡å™¨ç®¡ç† | éœ€è¦ | æ— éœ€ |
| æ‰©å±•æ€§ | æ‰‹åŠ¨ | è‡ªåŠ¨ |
| æˆæœ¬ | å›ºå®š | æŒ‰ä½¿ç”¨é‡ |
| å†·å¯åŠ¨ | æ—  | æœ‰ |
| æŒä¹…åŒ–å­˜å‚¨ | æ”¯æŒ | é™åˆ¶ |

### é€‚é…ä¼˜åŒ–

1. **æ—¥å¿—ç³»ç»Ÿ**
   - æ£€æµ‹ serverless ç¯å¢ƒ
   - ç¦ç”¨æ–‡ä»¶æ—¥å¿—ï¼Œä»…ä½¿ç”¨æ§åˆ¶å°æ—¥å¿—
   - ä¼˜åŒ–æ—¥å¿—æ ¼å¼

2. **ç¼“å­˜ç­–ç•¥**
   - ä½¿ç”¨å†…å­˜ç¼“å­˜æ›¿ä»£ Redis
   - å‡å°‘ç¼“å­˜å¤§å°å’Œ TTL
   - å‡½æ•°é‡å¯åç¼“å­˜æ¸…ç©º

3. **æ€§èƒ½ä¼˜åŒ–**
   - å‡å°‘è¯·æ±‚è¶…æ—¶æ—¶é—´
   - ä¼˜åŒ–ä¾èµ–åŠ è½½
   - å‡å°‘å†…å­˜ä½¿ç”¨

## ğŸš€ éƒ¨ç½²æ–¹å¼

### å¼€å‘ç¯å¢ƒæµ‹è¯•
```bash
# æœ¬åœ° serverless æ¨¡å¼æµ‹è¯•
npm run dev:serverless

# è¿è¡Œ serverless æµ‹è¯•
npm run test:serverless
```

### Vercel éƒ¨ç½²
```bash
# é¢„è§ˆéƒ¨ç½²
npm run deploy:preview

# ç”Ÿäº§éƒ¨ç½²
npm run deploy

# ä½¿ç”¨è„šæœ¬éƒ¨ç½²
npm run deploy:script
```

## ğŸ”„ å…¼å®¹æ€§

### ä¿æŒå…¼å®¹
- æ‰€æœ‰ API ç«¯ç‚¹ä¿æŒä¸å˜
- å“åº”æ ¼å¼å®Œå…¨ä¸€è‡´
- åŠŸèƒ½ç‰¹æ€§æ— å˜åŒ–

### ç¯å¢ƒå·®å¼‚
- æ–‡ä»¶ç³»ç»Ÿè®¿é—®å—é™
- å‡½æ•°æ‰§è¡Œæ—¶é—´é™åˆ¶ï¼ˆ30ç§’ï¼‰
- å†…å­˜ä½¿ç”¨é™åˆ¶
- æ— æŒä¹…åŒ–å­˜å‚¨

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### ä¼˜åŠ¿
- âœ… è‡ªåŠ¨æ‰©å±•
- âœ… é›¶æœåŠ¡å™¨ç®¡ç†
- âœ… æŒ‰éœ€ä»˜è´¹
- âœ… å…¨çƒ CDN åˆ†å‘
- âœ… è‡ªåŠ¨ HTTPS

### é™åˆ¶
- âš ï¸ å†·å¯åŠ¨å»¶è¿Ÿ
- âš ï¸ æ‰§è¡Œæ—¶é—´é™åˆ¶
- âš ï¸ å†…å­˜é™åˆ¶
- âš ï¸ æ— æŒä¹…åŒ–å­˜å‚¨

## ğŸ”§ é…ç½®å»ºè®®

### ç”Ÿäº§ç¯å¢ƒ
```env
NODE_ENV=production
REQUEST_TIMEOUT=15000
MAX_RETRIES=2
RATE_LIMIT_MAX=50
MEMORY_CACHE_MAX_SIZE=500
```

### å¼€å‘ç¯å¢ƒ
```env
NODE_ENV=development
DEBUG=true
LOG_LEVEL=debug
```

## ğŸ“ˆ ç›‘æ§æŒ‡æ ‡

### å…³é”®æŒ‡æ ‡
- å‡½æ•°è°ƒç”¨æ¬¡æ•°
- å¹³å‡å“åº”æ—¶é—´
- é”™è¯¯ç‡
- å†…å­˜ä½¿ç”¨
- å¸¦å®½æ¶ˆè€—

### ç›‘æ§å·¥å…·
- Vercel Dashboard
- å‡½æ•°æ—¥å¿—
- æ€§èƒ½åˆ†æ

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **å†·å¯åŠ¨æ…¢** - ä¼˜åŒ–ä¾èµ–ï¼Œå‡å°‘åˆå§‹åŒ–ä»£ç 
2. **å†…å­˜ä¸è¶³** - å‡å°‘ç¼“å­˜å¤§å°ï¼Œä¼˜åŒ–æ•°æ®ç»“æ„
3. **è¶…æ—¶é”™è¯¯** - è°ƒæ•´ REQUEST_TIMEOUTï¼Œä¼˜åŒ–è¯·æ±‚é€»è¾‘
4. **éƒ¨ç½²å¤±è´¥** - æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬ï¼ŒéªŒè¯é…ç½®æ–‡ä»¶

### è°ƒè¯•æ–¹æ³•
```bash
# æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
vercel logs

# æœ¬åœ°è°ƒè¯•
npm run dev:serverless

# è¿è¡Œæµ‹è¯•
npm run test:serverless
```

## ğŸ¯ æœ€ä½³å®è·µ

### å¼€å‘å»ºè®®
1. ä½¿ç”¨ `npm run dev:serverless` è¿›è¡Œæœ¬åœ°æµ‹è¯•
2. å®šæœŸè¿è¡Œ `npm run test:serverless` éªŒè¯åŠŸèƒ½
3. ç›‘æ§å‡½æ•°æ€§èƒ½å’Œé”™è¯¯ç‡
4. åˆç†è®¾ç½®ç¼“å­˜ç­–ç•¥

### éƒ¨ç½²å»ºè®®
1. å…ˆéƒ¨ç½²åˆ°é¢„è§ˆç¯å¢ƒæµ‹è¯•
2. éªŒè¯æ‰€æœ‰ API ç«¯ç‚¹æ­£å¸¸å·¥ä½œ
3. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
4. ç›‘æ§éƒ¨ç½²åçš„æ€§èƒ½æŒ‡æ ‡

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Vercel éƒ¨ç½²æŒ‡å—](./deploy-vercel.md)
- [Serverless ä½¿ç”¨æ–‡æ¡£](./README-SERVERLESS.md)
- [å¿«é€Ÿéƒ¨ç½²æŒ‡å—](./QUICK-DEPLOY.md)
- [API æ–‡æ¡£](./docs/API_DOCUMENTATION.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿› Serverless é€‚é…ã€‚